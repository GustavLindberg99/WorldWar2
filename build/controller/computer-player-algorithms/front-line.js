import lodash from"https://cdn.jsdelivr.net/npm/lodash@4.17.21/+esm";import{refreshUI}from"../../utils.js";import{Hex}from"../../model/mapsheet.js";import{Partnership}from"../../model/partnership.js";import{Countries}from"../../model/countries.js";var FrontLine;!function(e){let n;function r(e,n){if(e.country===Countries.france||e.country===Countries.italy||n.country===Countries.france||n.country===Countries.italy){if(!e.isColony)return-1;if(!n.isColony)return 1}const r=e=>e.isResourceHex||null!==e.city;return r(e)!==r(n)?Number(r(n))-Number(r(e)):Number(n.adjacentLandHexes().some(r))-Number(e.adjacentLandHexes().some(r))}e.update=function(e){n=async function(e){const n=new Map([[Partnership.Axis,[]],[Partnership.Allies,[]]]);let r=0;for(let t of Hex.allHexes){r++,e(r/Hex.allHexes.length);const o=t.controller()?.partnership()??null;null===o||t.isDesert()||(t.adjacentLandHexes().some((e=>!(null===e.controller()||e.isDesert()||e.controller().partnership()!==o.opponent()||t.country===Countries.japan&&e.country===Countries.sovietUnion&&Countries.mongolia.partnership()===Partnership.Neutral||e.country===Countries.japan&&t.country===Countries.sovietUnion&&Countries.mongolia.partnership()===Partnership.Neutral)))&&n.get(o).push(t),await refreshUI())}return n}(e)},e.get=async function(e){return lodash.shuffle((await n).get(e)).sort(r)}}(FrontLine||(FrontLine={}));export default FrontLine;